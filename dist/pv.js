(self.webpackChunkyukicat_attach=self.webpackChunkyukicat_attach||[]).push([[148],{486:function(e,t,a){a.d(t,{t:function(){return x}});var i=a(893),n=a(723),s=a(294),o=a(935),r=a(778),c=a(567);const l=/[0-9]{1,}/,{body:d}=document,p=(0,c.QM)((()=>({clickable:{cursor:"pointer"}}))),u=(0,c.QM)((()=>({popper:{opacity:0,visibility:"hidden",background:"#33333380",color:"white",padding:"4px 8px",fontSize:"13px",borderRadius:"4px",maxHeight:"20vh",overflow:"auto",'&[data-show="true"]':{opacity:1,visibility:"visible",backdropFilter:"blur(3px)"},zIndex:999},"opacity-trans":{transition:"opacity 500ms ease-in-out"}}))),h=(e,t=2)=>{const a=("string"==typeof e?parseFloat(e):e)/3600,i=0|a,n=60*(a-i),s=0|n,o=60*(n-s);return`${i>0?`${i}小时`:""}${s>0?`${s}分`:""}${o>0?`${o-(0|o)>0?o.toFixed(t):o}秒`:""}`},v=(0,s.forwardRef)((({data:{hit:e,avgTOP:t},style:a,show:n},s)=>{const o=u();return(0,i.jsxs)("div",Object.assign({className:o.popper+" "+o["opacity-trans"],"data-show":n,ref:s,style:a},{children:[(0,i.jsx)("li",{children:`浏览量:${e}`},void 0),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("li",{children:`平均浏览时间:${h(t)}`},void 0),(0,i.jsx)("li",{children:`总浏览时间:${h(parseFloat(t)*parseInt(e),0)}`},void 0)]},void 0):null]}),void 0)})),f={fetcher:e=>fetch(e).then((e=>e.json())),revalidateOnFocus:!1,revalidateOnReconnect:!1};function m({path:e,raw:t}){const a=e+(e.endsWith("/")?"":"/"),{data:c,error:u}=(0,n.ZP)("https://yukicat-ga-hit.vercel.app/api/ga/?page="+a,f),h=t.replace(/<\/?span>/g,""),[m,x]=(0,s.useState)(),[y,g]=(0,s.useState)(),[b,w]=(0,s.useState)(!1),[j,k]=(0,s.useState)(),{styles:$,update:F}=(0,r.D)(m,y,{placement:"top",modifiers:[{name:"eventListeners",options:{resize:!0,scroll:b}}]}),O=p();return(0,s.useEffect)((()=>()=>clearTimeout(j)),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",Object.assign({onClick:()=>{w(!b),j&&clearTimeout(j),k(window.setTimeout((()=>{w(b),k(void 0)}),5e3))},ref:x,"data-raw":t,className:O.clickable},{children:u?h.replace(l,"-"):c?h.replace(l,c[0].hit):h}),void 0),(0,o.createPortal)((0,i.jsx)(v,{ref:g,data:c&&c[0]||{hit:h},style:$.popper,show:b},void 0),d)]},void 0)}const x=()=>{var e;const t=document.getElementsByClassName("meta-page-view");for(let a=0;a<t.length;a++){const n=t[a],s=null===(e=n.attributes.getNamedItem("data-path"))||void 0===e?void 0:e.value,r=n.innerHTML;(0,o.hydrate)((0,i.jsx)(m,{path:s,raw:r},void 0),n)}}},709:function(e,t,a){var i=a(486);document.addEventListener("pjax:complete",(()=>{(0,i.t)()})),(0,i.t)()}},function(e){e.O(0,[896],(function(){return t=709,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=pv.js.map