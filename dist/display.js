!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processTemplate=void 0;t.default=class{constructor(e,t,r){this.replacePlaceHolder=r,this.LEFT_BRACKET=e,this.RIGHT_BRACKET=t}async process(e){let t=!1,r="",n="";for(const i of e)switch(i){case this.LEFT_BRACKET:t?this.LEFT_BRACKET==this.RIGHT_BRACKET?(t=!1,r+=await this.replacePlaceHolder(n),n=""):(t=!1,r+=`${this.LEFT_BRACKET}bracketContent${this.LEFT_BRACKET}`,n=""):t=!0;break;case this.RIGHT_BRACKET:t?(t=!1,r+=await this.replacePlaceHolder(n),n=""):r+=i;break;default:t?n+=i:r+=i}return""!=n&&(r+=this.LEFT_BRACKET+n),r}},t.processTemplate=function(e,t,r,n){let i=!1,s="",o="";for(const a of n)switch(a){case e:i?e==t?(i=!1,s+=r(o),o=""):(i=!1,s+=`${e}bracketContent${e}`,o=""):i=!0;break;case t:i?(i=!1,s+=r(o),o=""):s+=a;break;default:i?o+=a:s+=a}return""!=o&&(s+=e+o),s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importExternalFacePacks=void 0;const n=r(4),i=r(5);t.importExternalFacePacks=async function(e){const t=await n.importJSON(e);if(t)return t.forEach(e=>{e.faces.forEach(t=>{t.url=i.getFaceFullUrl(t,e)})}),t;throw new Error(`Try to load FacePacks from '${e}' failed.`)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importJSON=void 0,t.importJSON=async function(e){return fetch(e,{method:"GET"}).then(e=>{if(e.ok)return e.json();throw new Error(`Fetch Error:Return HTTP ${e.status}, ${e.statusText}`)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFaceFullUrl=void 0;const n=r(2);t.getFaceFullUrl=function(e,t){return n.processTemplate("{","}",e=>"p_url"==e?t.p_url:`{${e}}`,e.url)}},,,,,,,,,,,,function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),s=n(r(18)),o=r(19);(async()=>{const e=new s.default(await i.importExternalFacePacks("https://cdn.jsdelivr.net/gh/YukiCat-Dev/yukicat.facepack/facepacks.json"));o._attachListeners(document.querySelectorAll("div.entry-content img:not(.avatar)")),o.showModal(),document.querySelectorAll("article.hentry p:not(.ct-respond-form-textarea):not(.form-submit)").forEach(t=>{e.render(t)})})()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.default=class{constructor(e,t="",r="",n=":",i=":"){this._faceMap=new Map,this._className=t,this._inlineStyle=r,this.LEFT_BRACKET=n,this.RIGHT_BRACKET=i;for(const t of e)for(const e of t.faces)this._faceMap.set(`${t.id}.${e.id}`,e.url)}render(e){e.innerHTML=n.processTemplate(this.LEFT_BRACKET,this.RIGHT_BRACKET,this.replacePlaceHolder.bind(this),e.innerHTML)}replacePlaceHolder(e){const t=this._faceMap.get(e);return t?`<img class="${this._className}" src="${t}" style="${this._inlineStyle} max-height:6vh;" alt="${this.LEFT_BRACKET}${e}${this.RIGHT_BRACKET}"/>`:`${this.LEFT_BRACKET}${e}${this.RIGHT_BRACKET}`}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hideModal=t._updateModal=t.showModal=t.clickHandler=t._removeListeners=t._attachListeners=void 0;const i=r(20),s=n(r(1)),o=n(r(0)),a=document.getElementById("imgmodal"),c=/(http[\S]+) ([0-9]+)w/i;function l(e){const t=e.target;if(t.dataset.fullUrl)u(t.dataset.fullUrl);else if(t.srcset){let e=0,r="";t.srcset.split(",").forEach(t=>{const n=c.exec(t);if(3==n.length){let t=parseInt(n[2]);t>e&&(e=t,r=n[1])}}),u(r||t.src)}else u(t.src)}function u(e){d(!0,e)}function d(e,t){s.default.render(o.default.createElement(i.Modal,{imgSrc:t,opacity:e,handleChangeOpacity:d}),a)}t._attachListeners=function(e){e.forEach(e=>{e.addEventListener("click",l)})},t._removeListeners=function(e){e.forEach(e=>{e.removeEventListener("click",l)})},t.clickHandler=l,t.showModal=u,t._updateModal=d,t.hideModal=function(){s.default.unmountComponentAtNode(a)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;const i=n(r(0)),s=n(r(21));t.Modal=function(e){const t=e.imgSrc&&e.opacity;return i.default.createElement("div",{onClick:()=>e.handleChangeOpacity(!1,e.imgSrc),style:{opacity:t?1:0,visibility:t?"visible":"hidden",position:"fixed",top:0,bottom:0,left:0,right:0,width:"100%",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.50)",transition:"all 550ms cubic-bezier(0.25,0.1,0.25,1)"}},i.default.createElement("div",{style:{margin:"0.8rem",overflow:"auto",maxHeight:"98vh"}},i.default.createElement(s.default,{key:(e.imgSrc?e.imgSrc:"#").split("/").pop(),src:e.imgSrc,width:"100%",height:"100%"})))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(0)),s=r(22);class o extends i.default.Component{constructor(e){super(e),this.state={showIndicator:{level:s.IndicateLevel.PRELOAD,style:{...e.style,width:e.width,height:e.height}},loaded:!1}}render(){return i.default.createElement("div",null,this.state.showIndicator&&i.default.createElement(s.Indicator,Object.assign({},this.state.showIndicator,{style:{...this.props.style,transition:"opacity 2s ease"},className:this.props.className})),i.default.createElement("img",{src:this.props.src,style:{...this.props.style},className:this.props.className,onLoad:()=>{this.setState({loaded:!0,showIndicator:null})},hidden:!this.state.loaded,onError:()=>{this.setState({showIndicator:{level:s.IndicateLevel.ERROR},loaded:!1})},width:this.props.width,height:this.props.height}))}}t.default=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Indicator=t.IndicateLevel=void 0;const i=n(r(0));!function(e){e[e.PRELOAD=0]="PRELOAD",e[e.ERROR=1]="ERROR"}(t.IndicateLevel||(t.IndicateLevel={}));const s=["https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/Ripple-1.3s-237px.svg","https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/error.svg"];t.Indicator=function(e){return i.default.createElement("img",{src:s[e.level],alt:e.description,style:e.style})}}]);
//# sourceMappingURL=display.js.map